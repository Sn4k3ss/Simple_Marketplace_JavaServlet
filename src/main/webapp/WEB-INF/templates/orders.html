<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">


<head>
  <title>Marketplace App</title>
  <meta charset="UTF-8">

  <link rel="stylesheet" type="text/css" media="all"
        href="../CSS/myStyle.css" th:href="@{/css/myStyle.css}" />
</head>

<body>

<header>
  <div>

    <a th:href="@{/home}" class="logo">
      <img src="https://tiw21marketplace.s3.eu-south-1.amazonaws.com/images/website/website-logo.png" alt="website-logo.png"/>
    </a>

    <div class="header-right">
      <a th:href="@{/home}">Home</a>
      <a th:href="@{/shoppingCart}">Shopping cart</a>
      <a th:href="@{/orders}" class="active">My Orders</a>
      <a th:href="@{/logout}">Logout</a>
    </div>

  </div>
</header>

<div th:class="welcome-title">
  <br>
  <br>
  <h1>Here are your orders, <span th:text="${session.user.userName}">Amadeus</span>
  </h1>
</div>


<div th:if="${not #lists.isEmpty(orders)}">
  <table th:each="order : ${orders}" th:class="styled-order-table">
    <!-- se il carrello è vuoto non mostrare la tabella -->
    <caption style="lighting-color: #04AA6D">ORDERS</caption>
      <thead >
        <tr>
          <th scope="col">Order id</th>
          <th scope="col">Order placement date</th>
          <th scope="col">Supplier</th>
          <th scope="col">Order amount</th>
          <th scope="col">Shipping fees</th>
          <th scope="col">Delivery date</th>
          <th scope="col">Address</th>
        </tr>
      </thead>

    <tbody>
        <tr>
          <td th:text="${order.orderId}">#0</td>
          <td th:text="${order.orderPlacementDate}">1-1-1970 00:00</td>
          <td th:text="${order.orderSupplier.supplierName}">AMZN</td>
          <td th:text="${order.orderAmount}">€999.99</td>
          <td th:text="${order.orderShippingFees}">€0.0</td>
          <td th:text="${order.deliveryDate}">1-1-1970 00:01</td>
          <td th:text="${order.shippingAddress.recipient} + ' ' + ${order.shippingAddress.address} +  ' '
                        + ${order.shippingAddress.city} +  ' ' + ${order.shippingAddress.state} +  ' '
                        + ${order.shippingAddress.phone}"> Heinz Strasse, Vienna Osterreich
          </td>

          <table class="styled-product-in-order-table">
            <caption style="lighting-color: #04AA6D">PRODUCTS</caption>
              <thead>
                <tr>
                  <th colspan="2" scope="col">Product name</th>
                  <th scope="col">Product description</th>
                  <th scope="col">Product's category</th>
                  <th scope="col">Product cost</th>
                </tr>
              </thead>
                  <tbody>
                    <tr th:each="product : ${order.orderProductsList}">
                      <td class="table-product-img">
                        <img th:src="'https://tiw21marketplace.s3.eu-south-1.amazonaws.com/images/products/'+ ${product.productImagePath}" alt="Product image"/>
                      </td>
                      <td th:text="${product.productName}">Nike Air Max 270 X Mozart limited edition</td>
                      <td th:text="${product.productDescription}">Scarpe bellissime</td>
                      <td th:text="${product.productCategory}">Scarpe e abbigliamento</td>
                      <td th:text="${product.supplierProductCost}">€99999.99</td>
                    </tr>
                  </tbody>
            </table>
        </tr>
    </tbody>
  </table>
</div>


<div th:if="${#lists.isEmpty(orders)}" style="display: block">
  <p>You didn't place any order yet</p>
</div>



<p>
<h4>User info</h4>
This is your e-mail:
  <span th:text="${session.user.email}">amadeus.wgang@gmail.com </span> <br>
  Name:
  <span th:text="${session.user.userName}">Amadeus</span> <br>
  Surname:
  <span th:text="${session.user.userSurname}">Mozart</span> <br>
  Id:
  <span th:text="${session.user.userId}">0</span> <br>
  Your country is: <span th:text="${#locale.country}">IT</span>
</p>



</body>
</html>